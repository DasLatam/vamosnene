---
const {
  title = "Vamos Nene...!!!",
  description = "F1 en castellano para Argentina: vivo, calendario, noticias y guías. Foco Colapinto.",
  layout = "portal", // "portal" | "dashboard"
} = Astro.props;

const apiBase = import.meta.env.PUBLIC_API_BASE || "";
const here = Astro.url.pathname;

const nav = [
  { href: "/", label: "Hoy" },
  { href: "/vivo", label: "Vivo" },
  { href: "/calendario/2026", label: "Calendario" },
  { href: "/noticias", label: "Noticias" },
  { href: "/guias/como-ver-f1-en-argentina", label: "Guías" },
  { href: "/tienda", label: "Tienda" },
];

const bodyClass = layout === "dashboard" ? "dashboard" : "";
---
<!doctype html>
<html lang="es-AR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={Astro.url.toString()} />

    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <meta name="theme-color" content="#67B7FF" />
    <link rel="stylesheet" href="/app.css" />

    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:image" content={new URL("/og.svg", Astro.url).toString()} />
  </head>
  <body class={bodyClass}>
    <header class="topbar">
      <div class="topbarInner">
        <div class="brand">
          <a href="/" aria-label="Ir al inicio">
            <img src="/brand/logo.svg" alt="Vamos Nene...!!!" />
          </a>
        </div>

        <nav class="nav">
          {nav.map((i) => (
            <a class={"navlink " + (here === i.href ? "active" : "")} href={i.href}>{i.label}</a>
          ))}
          <a class="btn alpine" href="/suscribirme">Recibir avisos</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <slot />
    </main>

    <footer class="container" style="padding-top:10px;padding-bottom:28px">
      <div class="card">
        <div class="row" style="justify-content:space-between">
          <div>
            <strong>Mapa del sitio</strong>
            <div class="row" style="margin-top:10px">
              <a class="badge" href="/">Hoy</a>
              <a class="badge" href="/vivo">Vivo</a>
              <a class="badge" href="/calendario/2026">Calendario</a>
              <a class="badge" href="/noticias">Noticias</a>
              <a class="badge" href="/guias/como-ver-f1-en-argentina">Guías</a>
              <a class="badge" href="/tienda">Tienda</a>
              <a class="badge" href="/suscribirme">Suscribirme</a>
              <a class="badge" href="/about">Sobre</a>
              <a class="badge" href="/contact">Contacto</a>
              <a class="badge" href="/privacy">Privacidad</a>
              <a class="badge" href="/terms">Términos</a>
              <a class="badge" href="/sitemap.xml">Sitemap</a>
            </div>
          </div>
          <div class="badge">API: <span class="kpi">{apiBase}</span></div>
        </div>
        <div class="hr"></div>
        <p class="muted">
          Nota: no somos un sitio oficial ni afiliado a Formula 1. Fuentes acreditadas en cada nota.
        </p>
      </div>
    </footer>
  </body>
</html>
